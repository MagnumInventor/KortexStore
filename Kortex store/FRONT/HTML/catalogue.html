<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kortex Store</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Dela+Gothic+One&family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Michroma&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Nova+Flat&family=Quicksand:wght@300..700&family=Rethink+Sans:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../CSS/main.css">
    <script src="../../SCRIPT/Header.js" defer></script>
    <script src="../../SCRIPT/Main.js" defer></script>
</head>
<body class="secondary-body">

        <!-- Header -->
        <header>

            <noscript>USE JS STUPID NIGGA!</noscript>
    
        <div class="header-content">
            <div class="logo">Kortex Store</div>
                <div class="burger-menu" id="burger-menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
        </div>
    
    <div class="black-line" id="black-line"></div>
            <nav id="nav-menu">
                <ul>
                    <li><a href="catalogue.html">Catalogue</a></li>
                    <li><a href="stock.html">Stock</a></li>
                    <li><a href="contacts.html">Contacts</a></li>
                    <li><a href="shipping.html">Shipping</a></li>
                </ul>
            </nav>
    <div class="black-line" id="second-black-line"></div>
    
        <div class="nav-points" id="nav-points">
            <div class="nav-text-mid">Private and policy</div>
            <div class="nav-text-aft">Terms of use</div>
        </div>
                <div class="social-icons" id="social-icons">
                        <a href="registration.html">
                    <img src="../../MEDIA/Images/login_24dp_E8EAED_FILL0_wght400_GRAD0_opsz24.png" alt="login" height="40" width="40">
                        </a>
                        <a href="index.html">
                    <img src="../../MEDIA/Images/public_24dp_5F6368_FILL0_wght400_GRAD0_opsz24.png" alt="social-icon" height="40" width="40">
                        </a>
                </div>
            
        </header>
    <!-- Header -->

    <!-- Main Banner -->
<main>

    <section class="search-section">
        <div class="search-container">
            <input type="text" placeholder="Search for products, categories, or brands..." id="search-input">
            <button type="button" id="search-button">Search</button>
        </div>
    </section>

 <div class="dropdown-con">
    <div class="dropdown-back">
        <div class="burger-menu-catalogue" id="burger-menu-catalogue-content">
            <span class="check1">&#11013;</span>
        </div>
        <button class="dropdown-button" id="button-menu-catalogue">Select type of clothes</button>
        <div class="dropdown-content" id="dropdown-content">
          <a href="#" onclick="filterOption('Shoes')">Shoes</a>
          <a href="#" onclick="filterOption('Pants')">Pants</a>
          <a href="#" onclick="filterOption('Shirt')">T-Shirts</a>
          <a href="#" onclick="filterOption('Upper')">Upper</a>
          <a href="#" onclick="filterOption('Headwear')">Headwear</a>
          <a href="#" onclick="filterOption('Accessories')">Accesories</a>
          <a href="#" onclick="filterOption('Jacket')">Jacket</a>
        </div>
      </div>  
 </div>   
 
 <div class="dropdown-sor">
    <div class="dropdown-back">
        <div class="burger-menu-catalogue" id="burger-menu-catalogue-sorting">
            <span class="check1">&#11013;</span>
        </div>
        <button class="dropdown-button" id="button-menu-catalogue-sorting">Select sorting</button>
        <div class="dropdown-sorting" id="dropdown-sorting">
            <button data-sort="expensive-to-cheap">Expensive to Cheap</button>
            <button data-sort="cheap-to-expensive">Cheap to Expensive</button>
            <button data-sort="ukraine-shipping">Fastest Shipping</button>
            <button data-sort="china-shipping">Slowest Shipping</button>
        </div>
      </div>  
 </div>  

<div class="dropdown-ret">
    <div class="button-return">
        <button class="dropdown-button-return" id="reset-filters">Return</button>
    </div>  
 </div> 

</main>
    <!-- RECOMENDED -->

<section class="search-products-section">
    <h1 class="search-section-title">SEARCH RESULTS</h1>


<section class="products-section">
        <div class="product-grid">
            <!-- Динамічно додані продукти -->
                
        </div>
</section>


     <!--   <div class="results-container">
            <div class="search-reminder"> System is waiting for search...</div>
            <ul class="results-list" id="results-list">
                Динамічно додані результати 
            </ul>
        </div> -->

</section>
    

    <!-- Sale Section -->

<div class="sale-banner-other"></div>
    <div class="sale-banner">SALE</div>

    <section class="sale-section">
        <div class="products">
            
            <div class="product">
                <img src="../HTML/Product/Upper/s-l400.jpg" alt="Sweater">
                <a class="price">$26.00 -- <span class="discount" style="color: crimson; text-decoration: line-through;">$41.00</span></a>
                <a class="order-btn" href="../HTML/Product/Upper/Shirt1.html" >Замовити</a>
            </div>

            <div class="product">
                <img src="../HTML/Product/Upper/carhartt-wip-demy-jacket-black-1000x1000.jpg" alt="Jacket">
                <a class="price">$110.00 -- <span class="discount" style="color: crimson; text-decoration: line-through;">$160.00</span></a>
                <a class="order-btn" href="../HTML/Product/Upper/Jacket1.html" >Замовити</a>
            </div> 

            <div class="product">
                <img src="../HTML/Product/Shoes/DV7513001_8.jpg" alt="Shoes">
                <a class="price">$60.00 -- <span class="discount" style="color: crimson; text-decoration: line-through;">$90.00</span></a>
                <a class="order-btn" href="../HTML/Product/Shoes/Shoes1.html" >Замовити</a>
            </div>

        </div>
    </section>

 <!--SCRIPT-->

<script>

            // DOM CHECKER

            document.addEventListener('DOMContentLoaded', () => {
        const productGrid = document.querySelector('.product-grid');
        if (productGrid) {
            // Ваш код для роботи з продуктами
            console.log("Елемент .product-grid знайдено");
        } else {
            console.error("Елемент .product-grid не знайдено");
        }
    });

    const productGrid = document.querySelector('.product-grid');
if (productGrid) {
    console.log("Елемент .product-grid знайдено");
}


                                         // MENUS + VISUAL


        //CATALOGUE 

    const buttonCheckmark = document.getElementById ('button-menu-catalogue');
    const dropdownContent = document.getElementById ('dropdown-content');
    const dropdownBurgerContent = document.getElementById ('burger-menu-catalogue-content');

    const buttonCheckmarkSorting = document.getElementById ('button-menu-catalogue-sorting');
    const dropdownSorting = document.getElementById ('dropdown-sorting');
    const dropdownBurgerSorting = document.getElementById ('burger-menu-catalogue-sorting');


    buttonCheckmark.addEventListener('click', () => {
buttonCheckmark.classList.toggle('active');
dropdownContent.classList.toggle('active');
dropdownBurgerContent.classList.toggle('active');
});
    buttonCheckmarkSorting.addEventListener('click', () => {
buttonCheckmarkSorting.classList.toggle('active');
dropdownSorting.classList.toggle('active');
dropdownBurgerSorting.classList.toggle('active');
});

//Closing option

    const closingOptionContent = document.getElementById ('dropdown-content')
    const closingOptionSorting = document.getElementById ('dropdown-sorting')

    closingOptionContent.addEventListener('click', () => {
dropdownContent.classList.remove('active');
dropdownBurgerContent.classList.remove('active');
 });
    closingOptionSorting.addEventListener('click', () => {
dropdownSorting.classList.remove('active');
dropdownBurgerSorting.classList.remove('active');
 });


    //CATALOGUE 

// Глобальні дані продуктів
const jsonData = [
    {
        "category": "Shoes",
        "items": [
            {
                "name": "Nike TN (red)",
                "price": 53.5,
                "image": "Product/Shoes/DV7513001_8.jpg",
                "link": "Product/Shoes/Shoes1.html",
                "deliveryTime": "ukraine-shipping"
            },
            {
                "name": "Adidas Sneakers",
                "price": 75,
                "image": "Product/Shoes/adidas-sneakers.jpg",
                "link": "Product/Shoes/Shoes.html",
                "deliveryTime": "china-shipping"
            },
            {
                "name": "Puma Running Shoes",
                "price": 60,
                "image": "Product/Shoes/puma-running.jpg",
                "link": "Product/Shoes/PumaRunning.html",
                "deliveryTime": "ukraine-shipping"
            },
            {
                "name": "Reebok Classic Leather",
                "price": 80,
                "image": "Product/Shoes/reebok-classic.jpg",
                "link": "Product/Shoes/ReebokClassic.html",
                "deliveryTime": "china-shipping"
            },
            {
                "name": "Converse Chuck Taylor",
                "price": 50,
                "image": "Product/Shoes/converse-chuck.jpg",
                "link": "Product/Shoes/ConverseChuck.html",
                "deliveryTime": "ukraine-shipping"
            },
            {
                "name": "Reebok Training Shoes",
                "price": 85,
                "image": "Product/Sportswear/reebok-training.jpg",
                "link": "Product/Sportswear/ReebokTrainingShoes.html",
                "deliveryTime": "china-shipping"
            }
        ]
    },
    {
        "category": "Upper",
        "items": [
            {
                "name": "Street Smart Hoodie",
                "price": 25,
                "image": "Product/Upper/s-l400.jpg",
                "link": "Product/Upper/Shirt.html",
                "deliveryTime": "ukraine-shipping"
            },
            {
                "name": "Levi's Denim Jacket",
                "price": 70,
                "image": "Product/Upper/levis-denim-jacket.jpg",
                "link": "Product/Upper/LevisJacket.html",
                "deliveryTime": "china-shipping"
            },
            {
                "name": "Zara Knit Sweater",
                "price": 40,
                "image": "Product/Upper/zara-knit.jpg",
                "link": "Product/Upper/ZaraSweater.html",
                "deliveryTime": "china-shipping"
            },
            {
                "name": "Under Armour Hoodie",
                "price": 55,
                "image": "Product/Sportswear/under-armour-hoodie.jpg",
                "link": "Product/Sportswear/UnderArmourHoodie.html",
                "deliveryTime": "ukraine-shipping"
            }
        ]
    },
    // ... решта категорій залишаються без змін
];



          // PRODUCTS CREATING

// Функція для відображення продуктів
function displayProducts(products) {
    const productsSection = document.querySelector('.product-grid');
    productsSection.innerHTML = ''; // Очистити попередні товари

    if (products.length > 0) {
        products.forEach(item => {
            const productCard = document.createElement('div');
            productCard.classList.add('product-card');
            productCard.innerHTML = `
                <div class="product-details">
                    <p class="product-name">${item.name}</p>
                    <p class="product-price">${item.price}$</p>
                    <p class="product-shipping">Приблизний термін доставки: ${item.deliveryTime} днів</p>
                </div>
                <a class="order-button" href="${item.link}">Замовити</a>
            `;
            productsSection.appendChild(productCard);
        });
    } else {
        productsSection.innerHTML = '<p>No products found.</p>';
    }
}

// 1. Пошук
function searchProducts(query) {
    const products = [];
    jsonData.forEach(category => {
        const filteredItems = category.items.filter(item =>
            item.name.toLowerCase().includes(query.toLowerCase())
        );
        products.push(...filteredItems);
    });
    return products;
}


        //FILTERING

function filterProducts(categoryKey) {
    if (categoryKey === 'all') {
        const allProducts = jsonData.flatMap(category => category.items);
        return allProducts;
    } else {
        const category = jsonData.find(cat => cat.category.toLowerCase() === categoryKey.toLowerCase());
        return category ? category.items : [];
    }
}


        // SORTING

        function sortProducts(products, criteria) {
    switch (criteria) {
        case 'expensive-to-cheap':
            return products.sort((a, b) => b.price - a.price);
        case 'cheap-to-expensive':
            return products.sort((a, b) => a.price - b.price);
        case 'ukraine-shipping': // Сортування по Україні (найшвидша доставка)
            return products.sort((a, b) => {
                if (a.deliveryTime === 'ukraine-shipping' && b.deliveryTime !== 'ukraine-shipping') return -1;
                if (a.deliveryTime !== 'ukraine-shipping' && b.deliveryTime === 'ukraine-shipping') return 1;
                return 0;
            });
        case 'china-shipping': // Сортування по Китаю (повільніша доставка)
            return products.sort((a, b) => {
                if (a.deliveryTime === 'china-shipping' && b.deliveryTime !== 'china-shipping') return -1;
                if (a.deliveryTime !== 'china-shipping' && b.deliveryTime === 'china-shipping') return 1;
                return 0;
            });
        default:
            return products;
    }
}





// Обробка змін
function handleUpdates({ query = '', category = 'all', sort = null }) {
    let products = filterProducts(category); // Фільтрація
    if (query) {
        products = searchProducts(query); // Пошук
    }
    if (sort) {
        products = sortProducts(products, sort); // Сортування
    }
    displayProducts(products);
}

// Події
document.getElementById('search-button').addEventListener('click', () => {
    const query = document.getElementById('search-input').value;
    handleUpdates({ query });
});

document.getElementById('dropdown-content').addEventListener('click', event => {
    const category = event.target.textContent.toLowerCase();
    handleUpdates({ category });
});

// Слухач подій для сортування
document.getElementById('dropdown-sorting').addEventListener('click', event => {
    if (event.target.tagName === 'BUTTON') {
        const sort = event.target.getAttribute('data-sort'); // Отримуємо критерій з атрибута
        handleUpdates({ sort }); // Викликаємо оновлення з критерієм сортування
    }
});

// Завантаження всіх продуктів за замовчуванням
window.onload = () => handleUpdates({});

document.getElementById('reset-filters').addEventListener('click', () => {
    renderProducts(flatProductList); // Скидаємо фільтри
});

</script>

 <!--SCRIPT-->

<footer>
        <div>
            <h3>Контакти</h3>
            <p>Mobile: (+380) 96 042 7745</p>
            <p>Email: krtxstoreb@gmail.com</p>
        </div>
        <div>
            <h3>Соціальні мережі</h3>
            <a href="https://www.facebook.com/" target="_blank">Instagram</a> |
            <a href="https://twitter.com/" target="_blank">Telegram</a> |
            <a href="https://www.instagram.com/" target="_blank">OLX</a>
        </div>
        <div class="footer-links">
            <a href="(private-and-policy)index.html">Політика конфіденційності</a> |
            <a href="/terms-of-service">Умови обслуговування</a>
        </div>
        <div class="copyright">
            <p>&copy; 2024 Всі права захищено</p>
        </div>
</footer>
    
</body>
</html>
